const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/slidev/shiki-Cs8HFdbM.js","assets/monaco/bundled-types-DyDFhQlo.js","assets/modules/file-saver-C8QSpN-3.js","assets/modules/vue-mKt6p7ga.js","assets/monaco/bundled-types-iRPIFVgV.css","assets/modules/shiki-BA_elKM4.js","assets/modules/shiki-DVQfPmV_.css"])))=>i.map(i=>d[i]);
import{r as x,d as N,O as I,f as l,o,z as L,H as P,X as D,aO as H,_ as z,N as J,ag as F,ah as U,i as A,am as q,g as R,t as C,a1 as y,F as b,aj as B,b as K,n as W,P as X,k as Z,e as G,w as Q}from"../modules/vue-mKt6p7ga.js";import{$ as Y,_ as T,a as ee,Z as te,a0 as E}from"../monaco/bundled-types-DyDFhQlo.js";import{a as ne,A as se}from"../index-DUrPz2Be.js";import{u as re}from"./context-BO6eJi3K.js";import{_ as ie}from"./IconButton.vue_vue_type_script_setup_true_lang-DsFrmVTX.js";import"../modules/file-saver-C8QSpN-3.js";import"../modules/shiki-BA_elKM4.js";const M={},oe=[],ae=Y(async()=>{const a={javascript:O,js:O,typescript:O,ts:O},{getHighlighter:t}=await T(async()=>{const{getHighlighter:i}=await import("./shiki-Cs8HFdbM.js");return{getHighlighter:i}},__vite__mapDeps([0,1,2,3,4,5,6])),s=await t(),p=async(i,d,c)=>{try{const u=a[d];if(!u)throw new Error(`Runner for language "${d}" not found`);return await u(i,{options:c,highlight:s,run:async(e,n)=>await p(e,n,c)})}catch(u){return console.error(u),{error:`${u}`}}};for(const i of oe){const d=await i(a);Object.assign(a,d)}return{highlight:s,run:p}});function le(a){const t=x([]),s=e=>t.value.push({error:String(e)}),p=(...e)=>t.value.push(e.map(d)),i=Object.assign({},console);i.info=i.log=i.debug=i.warn=i.error=p,i.clear=()=>t.value.length=0;try{const e=`return async (console, __slidev_import, __slidev_on_error) => {
    ${ee.monacoRunUseStrict?'"use strict";':""}
      try {
        ${u(a)}
      } catch (e) {
        __slidev_on_error(e)
      }
    }`;new Function(e)()(i,n=>{const r=M[n];if(!r)throw new Error(`Module not found: ${n}.
Available modules: ${Object.keys(M).join(", ")}. Please refer to https://sli.dev/custom/config-code-runners#additional-runner-dependencies`);return r},s)}catch(e){s(e)}function d(e){return typeof e=="string"?{text:e}:{text:c(e),highlightLang:"javascript"}}function c(e){let n="";if(e instanceof Error)n=`Error: ${JSON.stringify(e.message)}`;else if(e==null||typeof e=="symbol")n=String(e);else if(Array.isArray(e))n=`[${e.map(c).join(", ")}]`;else if(e instanceof Set){const r=[...e];n=`Set (${e.size}) {${r.map(c).join(", ")}}`}else if(e instanceof Map){const r=[...e.entries()];n=`Map (${e.size}) {${r.map(([m,_])=>`${c(m)} => ${c(_)}`).join(", ")}}`}else if(e instanceof RegExp)n=e.toString();else if(typeof e=="string")n=JSON.stringify(e);else if(typeof e=="object"){const r=e.constructor?.name??"",m=r&&r==="Object"?"":r;n=(m?`${m}: `:"")+JSON.stringify(e,(v,g)=>g===void 0?"__undefined__":g,2).replace(/"__undefined__"/g,"undefined"),n=String(n)}else n=String(e);return n}function u(e){return e=e.replace('import "reflect-metadata"',"").replace('require("reflect-metadata")',""),e=e.replace("export {};",""),e}return t}let k;async function O(a){k??=await T(()=>import("../monaco/bundled-types-DyDFhQlo.js").then(s=>s.t),__vite__mapDeps([1,2,3,4])),a=k.transpileModule(a,{compilerOptions:{module:k.ModuleKind.ESNext,target:k.ScriptTarget.ES2022},transformers:{after:[ce]}}).outputText;const t=/import\s*\((.+)\)/g;return a=a.replace(t,(s,p)=>`__slidev_import(${p})`),le(a)}function ce(a){const{factory:t}=a,{isImportDeclaration:s,isNamedImports:p,NodeFlags:i}=k;return d=>{const c=[...d.statements];for(let u=0;u<c.length;u++){const e=c[u];if(!s(e))continue;let n;const r=e.importClause?.namedBindings,m=[];if(e.importClause?.name&&m.push(t.createBindingElement(void 0,t.createIdentifier("default"),e.importClause.name)),r)if(p(r)){for(const v of r.elements)m.push(t.createBindingElement(void 0,v.propertyName,v.name));n=t.createObjectBindingPattern(m)}else n=t.createIdentifier(r.name.text);else n=t.createObjectBindingPattern(m);const _=t.createVariableStatement(void 0,t.createVariableDeclarationList([t.createVariableDeclaration(n,void 0,void 0,t.createAwaitExpression(t.createCallExpression(t.createIdentifier("import"),void 0,[e.moduleSpecifier])))],i.Const));c[u]=_}return t.updateSourceFile(d,c)}}const ue=N({__name:"DomElement",props:{element:{}},setup(a){const t=a,s=x();return I(()=>{s.value&&s.value.appendChild(t.element)}),(p,i)=>(o(),l("div",{ref_key:"container",ref:s},null,512))}}),de={key:0,class:"text-sm text-center opacity-50"},me={key:1,class:"text-sm text-center opacity-50"},pe={key:2,class:"text-sm text-center opacity-50"},fe=["innerHTML"],he={key:1,class:"text-red-500"},_e={key:3,class:"output-line"},ve=["innerHTML"],ge={key:2,class:"separator"},ye={key:0,class:"absolute right-1 top-1 max-h-full flex gap-1"},Ce=N({__name:"CodeRunner",props:{modelValue:{},lang:{},autorun:{type:[Boolean,String]},height:{},showOutputAt:{type:[null,Boolean,String,Number,Array]},highlightOutput:{type:Boolean},runnerOptions:{}},emits:["update:modelValue"],setup(a,{emit:t}){const s=a,p=t,{isPrintMode:i}=ne(),d=F(s,"modelValue",p),{$renderContext:c,$clicksContext:u}=re(),e=L(()=>!["slide","presenter"].includes(c.value)),n=i.value?"once":s.autorun,r=x(n),m=P(),_=x(0),v=x(),g=x(s.showOutputAt);if(s.showOutputAt){const w=se();D(()=>{const h=u.calculate(s.showOutputAt);h?(u.register(w,h),H(()=>{g.value=!h.isActive.value})):g.value=!1}),z(()=>u.unregister(w))}const $=te(200,async()=>{if(e.value)return;const{highlight:w,run:h}=await ae();v.value=w;const f=setTimeout(()=>{r.value=!0},500);m.value=await h(d.value,s.lang,s.runnerOptions??{}),_.value+=1,r.value=!1,clearTimeout(f)});return n==="once"?$():n&&J(d,$,{immediate:!0}),(w,h)=>(o(),l(b,null,[U(R("div",{class:"relative flex flex-col rounded-b border-t border-main",style:Z({height:s.height}),"data-waitfor":".slidev-runner-output"},[e.value?(o(),l("div",de,' Code is disabled in the "'+C(y(c))+'" mode ',1)):r.value?(o(),l("div",me," Running... ")):m.value?(o(),l("div",{key:`run-${_.value}`,class:"slidev-runner-output"},[(o(!0),l(b,null,B(y(E)(X(m.value)),(f,V)=>(o(),l(b,{key:V},["html"in f?(o(),l("div",{key:0,innerHTML:f.html},null,8,fe)):"error"in f?(o(),l("div",he,C(f.error),1)):"element"in f?(o(),K(ue,{key:2,element:f.element},null,8,["element"])):(o(),l("div",_e,[(o(!0),l(b,null,B(y(E)(f),(S,j)=>(o(),l(b,{key:j},[S.highlightLang&&v.value?(o(),l("span",{key:0,class:"highlighted",innerHTML:v.value(S.text,S.highlightLang)},null,8,ve)):(o(),l("span",{key:1,class:W(S.class)},C(S.text),3)),j<y(E)(f).length-1?(o(),l("span",ge,",")):A("v-if",!0)],64))),128))]))],64))),128))])):(o(),l("div",pe," Click the play button to run the code "))],4),[[q,!g.value]]),y(d).trim()?(o(),l("div",ye,[G(ie,{class:"w-8 h-8 max-h-full flex justify-center items-center",title:"Run code",onClick:y($)},{default:Q(()=>[...h[0]||(h[0]=[R("div",{class:"i-carbon:play"},null,-1)])]),_:1},8,["onClick"])])):A("v-if",!0)],64))}});export{Ce as default};
